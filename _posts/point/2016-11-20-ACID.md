---
layout: post
title: 事务一致性
categories: Point
---



举例说明如下：


银行A账户向B账户汇款100元；


一致性：A给B转钱，单从数据库的角度来看，从A上减掉100块钱，然后就提交，本身这个操作没有问题。但是从业务的角度来看，你必须得给B上加上100块钱，这样整体数据才算一致。因此：


A-100；


B+100；


这样才算一个事务，因为它保证了数据的一致，即要满足业务需求，在数据上A与B也要一致。


一致性的本质就是你在进行一个事务的时候，是应该选择将A-100作为一个事务呢，还是应该选择将A-100以及B+100整体作为一个事务呢。


原子性：是假如你选择了将A-100以及B+100整体作为一个事务，那么他们就是一个整体，要么大家都成功，要么大家都失败。


原子性的本质就是A减去100执行成功了，那B加100一定也要执行成功，也就是A成功，B也要成功, A失败，b也要失败。将A和b看做一个整体。


原子性与一致性的区别是：一致性是选择要不要加上B+100这个条件，而原子性是B+100与A-100是否要作为一个整体考虑。


数据库的ACID原则：


> A：原子性: 即要么泡妞成功，要么泡妞不成功，绝对不能出现暧昧不清的情况

> C：一致性: 即如果对方对你好，你就不能耍脾气，也要对对方好，状态要保持一致

> I：隔离性: 谈恋爱期间钱归钱，爱归爱，两者不能混淆，爱不应收到穷富的干扰

> D：持久性: e……

-----------------------


end


